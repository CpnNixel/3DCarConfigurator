@model CarConfigViewModel
@{
    ViewData["Title"] = "Car";

}

<link rel="stylesheet" href="~/css/CarPage.css" />

<div class="car">
    <img src="~/img/@Model.Car.PathToModel" width="350" height="200" /><br />
    <div class="description">
        <span class="carName">
            <b>Name:</b> @Model.Car.Name
        </span><br />
        <span class="carPrice">
            <b>Price:</b> @Model.Car.CarPrice
        </span>
    </div>
</div>

<div class="configurations">
    <div class="details">
        <div class="colors">
            <div class="colorHeader">Color:</div>            

                @foreach (var detail in Model.Details.Where(x => x.Category == "Color"))
                {
                    if (Model.PickedDetails.Contains(detail.Id))
                    {
                        <div class="color selected" style=" background: @detail.Name;" data-detailId="@detail.Id" asp-for="color"></div>
                    }
                    else
                    {
                        <div class="color" style=" background: @detail.Name;" data-detailId="@detail.Id" asp-for="color"></div>
                    }

                }

            
        </div>
        <div class="wheels">
           

                @foreach (var detail in Model.Details.Where(x => x.Category == "Wheels"))
                {
                    if (Model.PickedDetails.Contains(detail.Id))
                    {
                        <p><input type="radio" name="Wheels" data-detailId="@detail.Id" checked />@detail.Name</p>
                    }
                    else
                    {
                        <p><input type="radio" name="Wheels" data-detailId="@detail.Id" />@detail.Name</p>
                    }
                }

            
        </div>
    </div>
</div>

<p id="like">LIKE</p>

<script>
    document.querySelector("#like").onclick = function () {
        var configurationDetails = "";

        var pickedColor = document.querySelector(".selected");
        configurationDetails = pickedColor.dataset.detailid;

        var checkedList = document.querySelectorAll("input:checked");
        checkedList.forEach((element) => {
            configurationDetails += "," + element.dataset.detailid;
        })

        document.location.replace("../../Car/SetLike/" + @Model.Car.Id + "," + configurationDetails);

    };
</script>

